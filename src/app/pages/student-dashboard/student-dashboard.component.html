<body>
<div class="hamburger-menu" (click)="toggleSidebar()">
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
</div>

<div class="sidebar" [ngClass]="{'open': isSidebarOpen}">
  <h2>Student Menu</h2>
  <a routerLink="/courses" (click)="closeSidebar()">Available Classes</a>
  <a routerLink="/courses" (click)="closeSidebar()">Enroll & Pay</a>
  <a href="#join-classes" (click)="closeSidebar()">Join Classes Overview</a>
  <a (click)="closeSidebar()">Attendance & Progress</a>
  <a (click)="closeSidebar()">Certificate</a>
  <a routerLink="/payments" (click)="closeSidebar()">Payments</a>
  <a (click)="logout()">Logout</a>
</div>

<div class="main-content">
  <h1>Student Dashboard</h1>
  <section id="available-classes" class="section">
    <h2>View Available Classes</h2>
    <p>Browse the list of currently offered courses and their details.</p>
  </section>
  <section id="enroll-pay" class="section">
    <h2>Enroll and Pay</h2>
    <p>Enroll in selected courses and proceed with the payment process.</p>
  </section>
  <section id="join-classes" class="section">
    <h2>Join Classes</h2>
    <p>
      Access live sessions or view recorded lectures for your enrolled
      courses.
    </p>

    <div *ngIf="loadingClasses">
      <p>Loading your paid classes... üåÄ</p>
    </div>

    <div *ngIf="classesError && !loadingClasses" class="error-message">
      ‚ö†Ô∏è {{ classesError }}
    </div>

    <div *ngIf="!loadingClasses && paidClasses.length > 0">
      <h3>Your Enrolled & Paid Classes:</h3>
      <ul>
        <li *ngFor="let classItem of paidClasses">
          <a [routerLink]="['/paid-classes', classItem.class_id]"
             [queryParams]="{ courseId: classItem.courseId }"
             (click)="closeSidebar()">
            {{ classItem.course_name }} - {{ classItem.startTime | date:'short' }}
            <span *ngIf="classItem.isLive" class="live-indicator">üî¥ Live</span>
          </a>
        </li>
      </ul>
    </div>

    <div *ngIf="!loadingClasses && paidClasses.length === 0 && !classesError">
      <p>You haven't enrolled or paid for any classes yet. Browse <a routerLink="/courses">available courses</a> to get started!</p>
    </div>

  </section>
  <section id="attendance-progress" class="section">
    <h2>View Attendance and Progress</h2>
    <p>
      Track your attendance records and monitor your progress in each course.
    </p>
  </section>
  <section id="certificate" class="section">
    <h2>Download Certificate</h2>
    <p>
      Download your course completion certificate if you meet the eligibility
      criteria.
    </p>
  </section>

  <app-modal
    [message]="'Are you sure you want to log out?'"
    [visible]="showModal"
    (confirm)="confirmLogout()"
    (cancel)="cancelLogout()">
  </app-modal>
</div>
</body>

<body>
<div class="hamburger-menu" (click)="toggleSidebar()">
  <div class="bar"></div>
  <div class="bar"></div>
  <div class="bar"></div>
</div>

<div class="sidebar" [ngClass]="{'open': isSidebarOpen}">
  <h2>Student Menu</h2>
  <a routerLink="/courses" (click)="closeSidebar()">Available Classes</a>
  <a routerLink="/courses" (click)="closeSidebar()">Enroll & Pay</a>

  <ng-container *ngIf="loadingClassLink">
    <span class="sidebar-status">Loading class link...</span>
  </ng-container>
  <ng-container *ngIf="!loadingClassLink && classLinkError">
    <span class="sidebar-error-status">{{ classLinkError }}</span>
  </ng-container>
  <ng-container *ngIf="!loadingClassLink && !classLinkError">
    <a *ngIf="defaultClassId && defaultCourseId"
       [routerLink]="['/paid-classes', defaultClassId]"
       [queryParams]="{ courseId: defaultCourseId }"
       (click)="closeSidebar()">
      Join My Class
    </a>
    <span *ngIf="!defaultClassId" class="sidebar-status">No class to join.</span>
  </ng-container>

  <a (click)="closeSidebar()">Attendance & Progress</a>
  <a (click)="closeSidebar()">Certificate</a>
  <a routerLink="/payments" (click)="closeSidebar()">Payments</a>
  <a (click)="logout()">Logout</a>
</div>

<div class="main-content">
  <h1>Student Dashboard</h1>
  <section id="available-classes" class="section">
    <h2>View Available Classes</h2>
    <p>Browse the list of currently offered courses and their details.</p>
  </section>
  <section id="enroll-pay" class="section">
    <h2>Enroll and Pay</h2>
    <p>Enroll in selected courses and proceed with the payment process.</p>
  </section>
  <section id="join-classes" class="section">
    <h2>Join Classes</h2>
    <p>
      Access live sessions or view recorded lectures for your enrolled
      courses.
    </p>

    <div class="join-class-section">
      <button *ngIf="loadingClassLink" disabled class="loading-button">Loading Class Link...</button>

      <button *ngIf="!loadingClassLink && classLinkError" disabled class="error-button">
        {{ classLinkError }}
      </button>

      <button *ngIf="!loadingClassLink && defaultClassId && defaultCourseId"
              [routerLink]="['/paid-classes', defaultClassId]"
              [queryParams]="{ courseId: defaultCourseId }"
              class="action-button">
        Go to Your Class
      </button>

      <p *ngIf="!loadingClassLink && !defaultClassId && !classLinkError" class="no-class-message">
        No upcoming or recent paid class found.
        <a routerLink="/courses">Browse available courses</a> to get started!
      </p>
    </div>

  </section>
  <section id="attendance-progress" class="section">
    <h2>View Attendance and Progress</h2>
    <p>
      Track your attendance records and monitor your progress in each course.
    </p>
  </section>
  <section id="certificate" class="section">
    <h2>Download Certificate</h2>
    <p>
      Download your course completion certificate if you meet the eligibility
      criteria.
    </p>
  </section>

  <app-modal
    [message]="'Are you sure you want to log out?'"
    [visible]="showModal"
    (confirm)="confirmLogout()"
    (cancel)="cancelLogout()">
  </app-modal>
</div>
</body>

